{% extends "base.html" %}
{% load static %}
<head>
  <!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script> -->
  <script src='https://code.jquery.com/jquery-3.3.1.min.js'></script>
  <script src="/lib/jquery.plugin.js"></script>
  <!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script> -->
  <script src='https://code.jquery.com/jquery-3.3.1.min.js'></script>
  <script src="/lib/jquery.plugin.js"></script>
 
</head>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>

{% block content %}

<h1>Happy Shopping, {{ user.username }}! </h1>
<div class="grid-wrapper">
<div>
  <h6><b>Search by code</b></h6>
  <!-- change this search -->
<form>
<input id="min" type="text" name="min_price"  >
to <input id="max" type="text" name="max_price"  > 

<input type="submit" value="Go" onmousedown="postCodeData();">
</form>

</div>
<div>
    <h6><b>Search by name<b></h6>
   <form name="product_name">
  <input  id="product_name"  type="text" name="name" >
  <input type="submit" value="Go" onmousedown="postNameData();">
   </form>


  </div>
    <!-- <script src="http://code.jquery.com/jquery-1.11.0.min.js"></script>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script> -->

    <script src="//code.jquery.com/jquery-1.9.1.min.js"></script>
<!-- 
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script>
    window.jQuery || 
    document.write('<script type="text/javascript" src="/js/jquery-1.9.1.min.js">\x3C/script>')
    </script> -->
    
    <script>
    // $.noConflict();g
    //change to code 
    function postCodeData() {
      var min = document.getElementById("min").value
      var max = document.getElementById("max").value
      var data = {min: min, max:max};
   $.ajax({
    type: "GET",
    url: "search_by_price/",
    data: JSON.stringify(data),
    success: function(data){
        console.log("success");
        console.log(data);
    },
    failure: function(data){
        console.log("failure");
        console.log(data);
    },
});
}

function postNameData() {
  var product_name = document.getElementById("product_name").value
    var data = {product_name: product_name};
  $.ajax({
    type: "GET",
    url: "{% url 'shop:index' %}",
    data: JSON.stringify(data),
    success: function(data){
        console.log("success");
        console.log(data);
    },
    failure: function(data){
        console.log("failure");
        console.log(data);
    },
});
}

  </script>
{% for product in product_list %}

<div class="grid-item">
<div class="view overlay">
    <h5 class="card-title">{{ product.product_name.title }}</h5>
    <img src="{{product.image.url}}" alt="product" width="210" height="250">
    <br />
    <a href="{{ product.view_product}}"  class="blue-text">Shop now!
      <div class="mask rgba-white-slight"></div>
    </a>
  
<div float='left' class="card" style="width: 18rem;">
  <div class="card-body">
    <h5 class="card-title">{{ product.product_name.title }}</h5>
    <p class="card-text">{{ product.description }}</p>
    <p class="card-text">Price - {{ product.price }} â‚¬</p>
    <a href="{{ product.view_product}}" class="btn btn-primary">See more</a>
  </div>
  </div>
</div>
</div>
{% endfor %}
</div>
{% endblock content %}