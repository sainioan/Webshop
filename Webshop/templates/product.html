{% extends 'product-page.html' %}
{% load static %}
<head>
    <!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script> -->
    <script src='https://code.jquery.com/jquery-3.3.1.min.js'></script>
    <script src="/lib/jquery.plugin.js"></script>
   
</head>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>

{% block content %}
  <main class="mt-5 pt-4">
    <div class="container dark-grey-text mt-5">
      <div class="row wow fadeIn">
        <div class="col-md-6 mb-4">

    <H6 class="lead font-weight-bold">{{ object.product_name.title }}</H6>
    <img src="{{product.image.url}}" alt="product" width="350" height="450"  class="img-fluid" >
</div>
        <div class="col-md-6 mb-4">
          <div class="p-4">
            <p class="lead">
                {% csrf_token %}
        <script>
            var url = "add_to_cart/"
           
            var cartItem = `{{product.id}}`
            var data = {
                cartItem: cartItem
            };
        </script>
        <div float="left">
        <button background-color='#008CBA'  width="18em"  class="btn btn-primary btn-md my-0 p" onClick="postData(url, data);"> Add {{ object.product_name }} to cart 
            <i class="fas fa-shopping-cart ml-1"></i>
        </button> 
        </div>
        <script>
             var cartItem = `{{product.id}}`
            var data = {
                cartItem: cartItem
            };
             var url2 = "remove_from_cart/"
        </script>
        <p></p>
        <div float="right">
        <button background-color='#f44336' width="18em" class= "btn btn-danger btn-md my-0 p" onClick="removeData(url2, data);">Remove from cart
            <i class="fas fa-shopping-cart ml-1"></i>
        </button> 
       
        </div>
        <p></p>
        <div float="right">
        <a background-color='#e7e7e7'color= "black" href="{% url 'shop:shopping_cart' %}" class="btn" >Cart
            <i class="fas fa-shopping-cart ml-1"></i>
        </a> 
    </div> 
        <p></p>
        <ul>
        <H5> <b>About this item </b></H5>
        <li> <b>Price: </b>{{ object.price }} â‚¬</li>        
        <li> <b> Description: </b>{{ object.description }}</li>
    </ul>

    </div>
</div>       

            {% comment %} 
            <form id="cart_item" class="d-flex justify-content-left" method="POST">
              <input type="number" value="1" id="cart_item" aria-label="Search" class="form-control" style="width: 100px">
            
            
            </form> {% endcomment %}

          </div>
        </div>
      </div>
      <hr>
    </div>
    <div>
        {% if items %}
        <h4 class="d-flex justify-content-between align-items-center mb-3">
            <span class="text-muted">Your cart</span>
            <span class="badge badge-secondary badge-pill">{{items}}</span>
          </h4>
          {% endif %}
    </div>

    <script src="http://code.jquery.com/jquery-1.11.0.min.js"></script>

    <script>
  
        console.log(`{{product.id}}`)
        function postData(url, data) {
  // Default options are marked with *
  $.ajax({
    type: "GET",
    url: url,
    data: data,
    success: function(data){
        console.log("success");
        console.log(data);
    },
    failure: function(data){
        console.log("failure");
        console.log(data);
    },
});
}
    
function removeData(url2, data) {
  // Default options are marked with *
  $.ajax({
    type: "GET",
    url: url2,
    data: data,
    success: function(data){
        console.log("success");
        console.log(data);
    },
    failure: function(data){
        console.log("failure");
        console.log(data);
    },
});
}
    </script>
     </main>

{% endblock content %}

